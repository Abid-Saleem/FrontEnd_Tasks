<!DOCTYPE html>
<html>
  <head>
    <title>Custom Pins on Google Map</title>
    <style>
        #map-canvas {
            width: 100%;
            height: 100vh;
            border: 1px solid black;
        }

        #map-canvas-left,
        #map-canvas-right {
            height: 250px;
            width: 550px;
        }

        #iw_container .iw_title {
            font-size: 16px;
            font-weight: bold;
        }

        .iw_content {
            padding: 15px 15px 15px 0;
        }

        .infoimage {
            display: block;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" type="text/javascript"></script>
    <script>
      function initMap() {
        var map;
        var infoWindow;

        // markersData variable stores the information necessary to each marker
        var markersDataLeft = [
        {
            lat: 55.696032, 
            lng: 12.552076,
            name: "Idrætsplads 1",
            address1:"Stevnsgade 26-34",
            address2: "",
            image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 236 304' xml:space='preserve'%3E%3Cpath d='M117.9,0.3C183.1,0.3,236,53.2,236,118.4c0,52.4-34.2,96.9-81.4,112.3L118,304l-36.6-73.3 C34.1,215.3,0,170.8,0,118.4C-0.1,53.1,52.7,0.3,117.9,0.3z M117.9,84.6c-18.6,0-33.7,15.1-33.7,33.7S99.3,152,117.9,152 s33.7-15.1,33.7-33.7S136.6,84.6,117.9,84.6z' fill='%23F5B81D'/%3E%3C/svg%3E%0A",
            postalCode: "2200 København" // don't insert comma in the last item of each marker
        },
        {
            lat: 55.682725, 
            lng: 12.531919,
            name: "Idrætsplads 2",
            address1:"Nyelandsvej 21-19",
            address2: "",
            image:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 236 304' xml:space='preserve'%3E%3Cpath d='M117.9,0.3C183.1,0.3,236,53.2,236,118.4c0,52.4-34.2,96.9-81.4,112.3L118,304l-36.6-73.3 C34.1,215.3,0,170.8,0,118.4C-0.1,53.1,52.7,0.3,117.9,0.3z M117.9,84.6c-18.6,0-33.7,15.1-33.7,33.7S99.3,152,117.9,152 s33.7-15.1,33.7-33.7S136.6,84.6,117.9,84.6z' fill='%23F5B81D'/%3E%3C/svg%3E%0A",
            postalCode: "2000 Frederiksberg" // don't insert comma in the last item of each marker
        },
        {
            lat: 55.687081, 
            lng: 12.462096,
            name: "Idrætsplads 3",
            address1:"Grønlunds Alle 10",
            address2: "",
            image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 236 304' xml:space='preserve'%3E%3Cpath d='M117.9,0.3C183.1,0.3,236,53.2,236,118.4c0,52.4-34.2,96.9-81.4,112.3L118,304l-36.6-73.3 C34.1,215.3,0,170.8,0,118.4C-0.1,53.1,52.7,0.3,117.9,0.3z M117.9,84.6c-18.6,0-33.7,15.1-33.7,33.7S99.3,152,117.9,152 s33.7-15.1,33.7-33.7S136.6,84.6,117.9,84.6z' fill='%23F5B81D'/%3E%3C/svg%3E%0A",
            postalCode: "2610 Rødovre" // don't insert comma in the last item of each marker
        } // don't insert comma in the last item
        ];



        // if HTML DOM Element that contains the map is found...
        if (document.getElementById('map-canvas')){ 
        
            // Coordinates to center the map
            var myLatlng = new google.maps.LatLng(55.696032, 12.552076);
        
            // Other options for the map, pretty much selfexplanatory
            var mapOptions = {
                zoom: 12,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
        
            // Attach a map to the DOM Element, with the defined settings
            var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        
        // a new Info Window is created
            infoWindow = new google.maps.InfoWindow();
            
            // Event that closes the Info Window with a click on the map
            google.maps.event.addListener(map, 'click', function() {
                infoWindow.close();
            });

        }


        // Finally displayMarkers() function is called to begin the markers creation
        displayMarkers(map);

        function displayMarkers(map) {
        var markersData;
        var map;
        markersData = markersDataLeft;
            map = map;
        
        // this variable sets the map bounds according to markers position
        var bounds = new google.maps.LatLngBounds();
        
        // for loop traverses markersData array calling createMarker function for each marker 
        for (var i = 0; i < markersData.length; i++){

            var latlng = new google.maps.LatLng(markersData[i].lat, markersData[i].lng);
            var name = markersData[i].name;
            var address1 = markersData[i].address1;
            var address2 = markersData[i].address2;
            var image = markersData[i].image;
            var postalCode = markersData[i].postalCode;

            createMarker(map, latlng, name, address1, address2, image, postalCode);

            // marker position is added to bounds variable
            bounds.extend(latlng);  
        }
        
        // Finally the bounds variable is used to set the map bounds
        // with fitBounds() function
        map.fitBounds(bounds);

        
        }

        // This function creates each marker and it sets their Info Window content
        function createMarker(map, latlng, name, address1, address2, image, postalCode){
        
        
        
        var marker = new google.maps.Marker({
            map: map,
            position: latlng,
            title: name
        });

        // This event expects a click on a marker
        // When this event is fired the Info Window content is created
        // and the Info Window is opened.
        google.maps.event.addListener(marker, 'click', function() {
            
            // Creating the content to be inserted in the infowindow
            var iwContent = '<div id="iw_container">' +
                    '<div class="iw_title">' + name + '<img src="' + image +'" width="150" class="infoimage" />' +'</div>' +
                '<div class="iw_content">' + address1 + '<br />' +
                address2 + '<br />' +
                postalCode + '</div></div>';
            
            // including content to the Info Window.
            infoWindow.setContent(iwContent);

            // opening the Info Window in the current map and at the current marker location.
            infoWindow.open(map, marker);
        });
        }
      }
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <script>
      // Call the initMap function to initialize the map
      initMap();
    </script>
  </body>
</html>
